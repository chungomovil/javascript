<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejercicio 17</title>
</head>
<body>
    <script>
        //Programa una función que dada una fecha válida determine cuantos años han pasado hasta el día de hoy, pe. miFuncion(new Date(1984,4,23)) devolverá 35 años (en 2020).
        
        const calcularFecha= fecha => {
            if(!/\d{2}-\d{2}-\d{4}/.test(fecha)) return "Formato de fecha invalido";
            fecha=fecha.split("-").reverse().join("-");
            fecha=new Date(fecha);
            if(isNaN(fecha)) return "Fecha incorrecta";
            let hoy=new Date();
            let transcurrido=(hoy.getTime()-fecha.getTime())/(1000*60*60*24*365);
            transcurrido=(Math.sign(transcurrido)===1) ? Math.floor(transcurrido) : Math.ceil(transcurrido);
            return (Math.sign(transcurrido)===1)
            ? `Han transcurrido ${transcurrido} anios, desde el ${fecha.getFullYear()}`
            : (Math.sign(transcurrido)===-1)
            ? `Aun faltan ${Math.abs(transcurrido)} anios para el ${fecha.getFullYear()}`
            : `Hay menos de un anio para ${fecha.getFullYear()}`
        }

        let entrada=prompt("Calcular anios desde una fecha (formato DD-MM-YYYY)").replaceAll("/","-");
        alert(calcularFecha(entrada));

    </script>
</body>
</html>